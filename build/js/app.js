(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

module.exports = ['$http', 'TMDB_API', 'EVT', function ($http, TMDB_API, EVT) {

	var searchResult = [];
	var totalPages = -1;
	var currPage = 1;

	var url = {
		searchMovie: TMDB_API.url + 'search/movie',
		searchMulti: TMDB_API.url + 'search/multi'
	};

	function req(searchObj) {

		if (currPage > totalPages && totalPages !== -1) {
			// emit event end of page
			EVT.EOP.emit();
			return;
		}

		$http({
			method: 'GET',
			url: url.searchMovie,
			params: {
				api_key: TMDB_API.key,
				query: searchObj.query,
				page: currPage
			}
		}).success(function (res) {
			// emit event search success
			searchResult = searchResult.concat(removeNoPosterItems(res.results));
			totalPages = res.total_pages;
			currPage++;
			console.log(res);
		}).error(function (err) {
			// emit event search err
			console.error(err);
		});
	}

	function removeNoPosterItems(results) {
		return results.filter(function (item) {
			return !!item.poster_path;
		});
	}

	function getRes() {
		return searchResult;
	}

	function clearSearch() {
		// emit event clearSeach
		searchResult = [];
		totalPages = -1;
		currPage = 1;
	}

	return {
		req: req,
		clearSearch: clearSearch,
		getRes: getRes
	};
}];

},{}],2:[function(require,module,exports){
'use strict';

module.exports = ['$rootScope', function ($rootScope) {

	var EVT = {

		EOP: {
			listen: function listen(cb) {
				$rootScope.$on('EOP', cb);
			},
			emit: function emit() {
				$rootScope.$broadcast('EOP');
			}
		}

	};

	return EVT;
}];

},{}],3:[function(require,module,exports){
'use strict';

angular.module('app', []).constant('TMDB_API', {
	key: '374c0342a6406dfe0aeb3de2ea042c59',
	url: 'http://api.themoviedb.org/3/'
}).controller('mainCtrl', require('./main.ctrl.js')).directive('movieItem', require('./mvItem.dir.js')).factory('TMDb', require('./TMDb.fac.js')).factory('EVT', require('./events.fac.js'));

// webgl
require('./indexGL.js');

},{"./TMDb.fac.js":1,"./events.fac.js":2,"./indexGL.js":4,"./main.ctrl.js":5,"./mvItem.dir.js":6}],4:[function(require,module,exports){
(function (global){
// 'use strict';

'use strict';

var CANVAS, STATS;
var SCENE, CAMERA, CAMERA_CTRL, RENDERER;
var WIDTH = window.innerWidth;
var HEIGHT = window.innerHeight;
var PIXEL_RATIO = window.devicePixelRatio || 1;
var SCREEN_RATIO = WIDTH / HEIGHT;
var MOUSE_X = WIDTH * 0.5;
var MOUSE_Y = HEIGHT * 0.5;
var WHEEL_DY = 0;

// ---- Settings
var SCENE_SETTINGS = {
	bgColor: 2368557,
	enableGridHelper: true,
	enableAxisHelper: true
};

// ---- Scene
CANVAS = document.getElementById('canvas-container');
SCENE = new THREE.Scene();
// ---- Camera
CAMERA = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 10, 100000);
// ---- Camera orbit controls
// CAMERA_CTRL = new THREE.OrbitControls( CAMERA, CANVAS );
// CAMERA_CTRL.object.position.z = 600;
// CAMERA_CTRL.update();
// global.cam = CAMERA_CTRL;
global.cam = CAMERA;
// ---- Renderer
RENDERER = new THREE.CSS3DRenderer();
RENDERER.setSize(WIDTH, HEIGHT);
CANVAS.appendChild(RENDERER.domElement);
// ---- Stats
STATS = new Stats();
CANVAS.appendChild(STATS.domElement);

function main() {}

function update() {

	// var dx = - ( ( MOUSE_X / WIDTH ) - 0.5 );
	// if ( Math.abs( dx ) > 0.4 ) {
	// 	CAMERA.rotateY( dx * 0.01 );
	// }

	//
	// var dy = - ( ( MOUSE_Y / HEIGHT ) - 0.5 );
	// if ( Math.abs( dy ) > 0.2 ) {
	// 	CAMERA.position.y += dy * 10.0;
	// }

	CAMERA.position.y += WHEEL_DY * 1.0;
	CAMERA.rotateY(WHEEL_DY * 0.025);
	WHEEL_DY *= 0.95;
}

// ----  draw loop
function run() {

	requestAnimationFrame(run);
	// RENDERER.clear();
	update();
	RENDERER.render(SCENE, CAMERA);
	STATS.update();
}

CANVAS.addEventListener('mousemove', function (event) {

	MOUSE_X = event.clientX;
	MOUSE_Y = event.clientY;
});

window.addEventListener('wheel', function (event) {

	WHEEL_DY = Math.sign(event.deltaY);
});

window.addEventListener('keypress', function (event) {
	switch (event.keyCode) {
		case 119:
			/*w*/
			WHEEL_DY = 1.0;
			break;
		case 115:
			/*s*/
			WHEEL_DY = -1.0;
			break;
	}
});

var util = require('./util.js');
window.addEventListener('resize', util.debounce(onWindowResize, 50));

function onWindowResize() {
	WIDTH = window.innerWidth;
	HEIGHT = window.innerHeight;
	PIXEL_RATIO = window.devicePixelRatio || 1;
	SCREEN_RATIO = WIDTH / HEIGHT;
	CAMERA.aspect = SCREEN_RATIO;
	CAMERA.updateProjectionMatrix();
	RENDERER.setSize(WIDTH, HEIGHT);
}

main();
run();

global.makeHelixPosters = function (posterObjectMulti) {
	var vector = new THREE.Vector3();
	var allPosters = new THREE.Object3D();
	for (var i = 0; i < posterObjectMulti.length; i++) {
		var elem = document.createElement('div');
		elem.className = 'posterElem';
		elem.style.backgroundImage = "url('http://image.tmdb.org/t/p/w154/" + posterObjectMulti[i].poster_path + "')";
		elem.style.width = '150px';
		elem.style.height = '230px';
		// elem.textContent = 'TEST TEXT';
		var css3dObj = new THREE.CSS3DObject(elem);

		var phi = i * 0.175 + Math.PI;
		var rr = 900;
		css3dObj.position.x = -rr * Math.sin(phi);
		css3dObj.position.y = -(i * 8) + 200;
		css3dObj.position.z = rr * Math.cos(phi);

		vector.x = -css3dObj.position.x * 2;
		vector.y = css3dObj.position.y;
		vector.z = -css3dObj.position.z * 2;
		// vector.multiplyScalar( -1 );

		css3dObj.lookAt(vector);

		allPosters.add(css3dObj);
	}
	SCENE.add(allPosters);
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./util.js":7}],5:[function(require,module,exports){
'use strict';

module.exports = ['$scope', 'TMDb', 'EVT', function ($scope, TMDb, EVT) {

	var vm = this;
	vm.search = {
		query: ''
	};
	vm.movieItems = null;

	$scope.$watch(TMDb.getRes, function (res) {
		vm.movieItems = res;
	}, true);

	var prevQuery = '';
	vm.search = function () {
		if (vm.search.query === '') return;
		if (prevQuery !== vm.search.query) {
			TMDb.clearSearch();
			prevQuery = vm.search.query;
		}
		TMDb.req(vm.search);
	};

	// DEBUG
	window.SCOPE = $scope;
	vm.TMDb = TMDb;

	EVT.EOP.listen(function () {
		console.log('recieved EOP event!');
	});
}];

},{}],6:[function(require,module,exports){
'use strict';

module.exports = ['TMDb', function (TMDb) {

	function ctrl($scope, $element) {}

	return {
		restrict: 'E',
		replace: true,
		scope: {
			movieItem: '='
		},
		controller: ctrl,
		controllerAs: 'mvItem',
		templateUrl: 'src/mvItem.html'
	};
}];

},{}],7:[function(require,module,exports){
"use strict";

function debounce(func, wait, immediate) {
	var _this = this,
	    _arguments = arguments;

	var timeout;
	return function () {

		var context = _this,
		    args = _arguments;
		var later = function later() {

			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

module.exports = {
	debounce: debounce
};

},{}]},{},[3])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJFOi94YW1wcC9odGRvY3MvYXVjcy13ZWJkZXYtdGVybS1wcm9qZWN0L3NyYy9UTURiLmZhYy5qcyIsIkU6L3hhbXBwL2h0ZG9jcy9hdWNzLXdlYmRldi10ZXJtLXByb2plY3Qvc3JjL2V2ZW50cy5mYWMuanMiLCJFOi94YW1wcC9odGRvY3MvYXVjcy13ZWJkZXYtdGVybS1wcm9qZWN0L3NyYy9pbmRleC5qcyIsIkU6L3hhbXBwL2h0ZG9jcy9hdWNzLXdlYmRldi10ZXJtLXByb2plY3Qvc3JjL2luZGV4R0wuanMiLCJFOi94YW1wcC9odGRvY3MvYXVjcy13ZWJkZXYtdGVybS1wcm9qZWN0L3NyYy9tYWluLmN0cmwuanMiLCJFOi94YW1wcC9odGRvY3MvYXVjcy13ZWJkZXYtdGVybS1wcm9qZWN0L3NyYy9tdkl0ZW0uZGlyLmpzIiwiRToveGFtcHAvaHRkb2NzL2F1Y3Mtd2ViZGV2LXRlcm0tcHJvamVjdC9zcmMvdXRpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUM3QyxVQUFXLEtBQUssRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFHOztBQUVqQyxLQUFJLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDdEIsS0FBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEIsS0FBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDOztBQUVqQixLQUFJLEdBQUcsR0FBRztBQUNULGFBQVcsRUFBRSxRQUFRLENBQUMsR0FBRyxHQUFHLGNBQWM7QUFDMUMsYUFBVyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEdBQUcsY0FBYztFQUMxQyxDQUFDOztBQUVGLFVBQVMsR0FBRyxDQUFFLFNBQVMsRUFBRzs7QUFFekIsTUFBSyxRQUFRLEdBQUcsVUFBVSxJQUFJ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QUFDLFdBQVcsQ0FBRSxJQUFJLENBQUUsQ0FBQzs7QUFFN0MsTUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQzlCLE1BQUksRUFBRSxHQUFHLEdBQUcsQ0FBQztBQUNiLFVBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUUsR0FBRyxDQUFFLENBQUM7QUFDNUMsVUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBLEFBQUUsR0FBRyxHQUFHLENBQUM7QUFDdkMsVUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUUsR0FBRyxDQUFFLENBQUM7O0FBRTNDLFFBQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDcEMsUUFBTSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUMvQixRQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDOzs7QUFHcEMsVUFBUSxDQUFDLE1BQU0sQ0FBRSxNQUFNLENBQUUsQ0FBQzs7QUFFMUIsWUFBVSxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsQ0FBQztFQUMzQjtBQUNELE1BQUssQ0FBQyxHQUFHLENBQUUsVUFBVSxDQUFFLENBQUM7Q0FDeEIsQ0FBQzs7Ozs7OztBQzlJRixNQUFNLENBQUMsT0FBTyxHQUFHLENBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQzFDLFVBQVcsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUk7O0FBRS9CLEtBQUksRUFBRSxHQUFHLElBQUksQ0FBQztBQUNkLEdBQUUsQ0FBQyxNQUFNLEdBQUc7QUFDWCxPQUFLLEVBQUUsRUFBRTtFQUNULENBQUM7QUFDRixHQUFFLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQzs7QUFFckIsT0FBTSxDQUFDLE1BQU0sQ0FBRSxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQVcsR0FBRyxFQUFHO0FBQzVDLElBQUUsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO0VBQ3BCLEVBQUUsSUFBSSxDQUFFLENBQUM7O0FBRVYsS0FBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ25CLEdBQUUsQ0FBQyxNQUFNLEdBQUcsWUFBWTtBQUN2QixNQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLEVBQUUsRUFBRyxPQUFPO0FBQ3JDLE1BQUssU0FBUyxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFHO0FBQ3BDLE9BQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNuQixZQUFTLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7R0FDNUI7QUFDRCxNQUFJLENBQUMsR0FBRyxDQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUUsQ0FBQztFQUN0QixDQUFDOzs7QUFHRixPQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztBQUN0QixHQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFZixJQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBRSxZQUFZO0FBQzNCLFNBQU8sQ0FBQyxHQUFHLENBQUUscUJBQXFCLENBQUUsQ0FBQztFQUNyQyxDQUFFLENBQUM7Q0FFSixDQUFFLENBQUM7Ozs7O0FDL0JKLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBRSxNQUFNLEVBQUUsVUFBVyxJQUFJLEVBQUc7O0FBRTVDLFVBQVMsSUFBSSxDQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUcsRUFDakM7O0FBRUQsUUFBTztBQUNOLFVBQVEsRUFBRSxHQUFHO0FBQ2IsU0FBTyxFQUFFLElBQUk7QUFDYixPQUFLLEVBQUU7QUFDTixZQUFTLEVBQUUsR0FBRztHQUNkO0FBQ0QsWUFBVSxFQUFFLElBQUk7QUFDaEIsY0FBWSxFQUFFLFFBQVE7QUFDdEIsYUFBVyxFQUFFLGlCQUFpQjtFQUM5QixDQUFDO0NBRUYsQ0FBRSxDQUFDOzs7OztBQ2hCSixTQUFTLFFBQVEsQ0FBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRztBQUMxQyxLQUFJLEtBQUssR0FBRyxJQUFJO0tBQ2YsVUFBVSxHQUFHLFNBQVMsQ0FBQzs7QUFFeEIsS0FBSSxPQUFPLENBQUM7QUFDWixRQUFPLFlBQVk7O0FBRWxCLE1BQUksT0FBTyxHQUFHLEtBQUs7TUFDbEIsSUFBSSxHQUFHLFVBQVUsQ0FBQztBQUNuQixNQUFJLEtBQUssR0FBRyxTQUFTLEtBQUssR0FBRzs7QUFFNUIsVUFBTyxHQUFHLElBQUksQ0FBQztBQUNmLE9BQUssQ0FBQyxTQUFTLEVBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxPQUFPLEVBQUUsSUFBSSxDQUFFLENBQUM7R0FDOUMsQ0FBQztBQUNGLE1BQUksT0FBTyxHQUFHLFNBQVMsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUNwQyxjQUFZLENBQUUsT0FBTyxDQUFFLENBQUM7QUFDeEIsU0FBTyxHQUFHLFVBQVUsQ0FBRSxLQUFLLEVBQUUsSUFBSSxDQUFFLENBQUM7QUFDcEMsTUFBSyxPQUFPLEVBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxPQUFPLEVBQUUsSUFBSSxDQUFFLENBQUM7RUFDM0MsQ0FBQztDQUNGOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDaEIsU0FBUSxFQUFSLFFBQVE7Q0FDUixDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0gWyAnJGh0dHAnLCAnVE1EQl9BUEknLCAnRVZUJyxcclxuZnVuY3Rpb24gKCAkaHR0cCwgVE1EQl9BUEksIEVWVCApIHtcclxuXHJcblx0dmFyIHNlYXJjaFJlc3VsdCA9IFtdO1xyXG5cdHZhciB0b3RhbFBhZ2VzID0gLTE7XHJcblx0dmFyIGN1cnJQYWdlID0gMTtcclxuXHJcblx0dmFyIHVybCA9IHtcclxuXHRcdHNlYXJjaE1vdmllOiBUTURCX0FQSS51cmwgKyAnc2VhcmNoL21vdmllJyxcclxuXHRcdHNlYXJjaE11bHRpOiBUTURCX0FQSS51cmwgKyAnc2VhcmNoL211bHRpJ1xyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIHJlcSggc2VhcmNoT2JqICkge1xyXG5cclxuXHRcdGlmICggY3VyclBhZ2UgPiB0b3RhbFBhZ2VzICYmIHRvdGFsUGFnZXMgIT09IC0xICkge1xyXG5cdFx0XHQvLyBlbWl0IGV2ZW50IGVuZCBvZiBwYWdlXHJcblx0XHRcdEVWVC5FT1AuZW1pdCgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0JGh0dHAoIHtcclxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcclxuXHRcdFx0dXJsOiB1cmwuc2VhcmNoTW92aWUsXHJcblx0XHRcdHBhcmFtczp7XHJcblx0XHRcdFx0YXBpX2tleTogVE1EQl9BUEkua2V5LFxyXG5cdFx0XHRcdHF1ZXJ5OiBzZWFyY2hPYmoucXVlcnksXHJcblx0XHRcdFx0cGFnZTogY3VyclBhZ2VcclxuXHRcdFx0fVxyXG5cdFx0fSApLnN1Y2Nlc3MoIGZ1bmN0aW9uICggcmVzICkge1xyXG5cdFx0XHQvLyBlbWl0IGV2ZW50IHNlYXJjaCBzdWNjZXNzXHJcblx0XHRcdHNlYXJjaFJlc3VsdCA9IHNlYXJjaFJlc3VsdC5jb25jYXQoIHJlbW92ZU5vUG9zdGVySXRlbXMoIHJlcy5yZXN1bHRzICkgKTtcclxuXHRcdFx0dG90YWxQYWdlcyA9IHJlcy50b3RhbF9wYWdlcztcclxuXHRcdFx0Y3VyclBhZ2UgKys7XHJcblx0XHRcdGNvbnNvbGUubG9nKCByZXMgKTtcclxuXHRcdH0gKS5lcnJvciggZnVuY3Rpb24gKCBlcnIgKSB7XHJcblx0XHRcdC8vIGVtaXQgZXZlbnQgc2VhcmNoIGVyclxyXG5cdFx0XHRjb25zb2xlLmVycm9yKCBlcnIgKTtcclxuXHRcdH0gKTtcclxuXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVOb1Bvc3Rlckl0ZW1zKCByZXN1bHRzICkge1xyXG5cdFx0cmV0dXJuIHJlc3VsdHMuZmlsdGVyKCBmdW5jdGlvbiAoIGl0ZW0gKSB7XHJcblx0XHRcdHJldHVybiAhIWl0ZW0ucG9zdGVyX3BhdGg7XHJcblx0XHR9ICk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRSZXMoKSB7XHJcblx0XHRyZXR1cm4gc2VhcmNoUmVzdWx0O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gY2xlYXJTZWFyY2goKSB7XHJcblx0XHQvLyBlbWl0IGV2ZW50IGNsZWFyU2VhY2hcclxuXHRcdHNlYXJjaFJlc3VsdCA9IFtdO1xyXG5cdFx0dG90YWxQYWdlcyA9IC0xO1xyXG5cdFx0Y3VyclBhZ2UgPSAxO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHJlcSxcclxuXHRcdGNsZWFyU2VhcmNoLFxyXG5cdFx0Z2V0UmVzXHJcblx0fTtcclxuXHJcbn0gXTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSBbICckcm9vdFNjb3BlJywgZnVuY3Rpb24gKCAkcm9vdFNjb3BlICkge1xyXG5cclxuXHR2YXIgRVZUID0ge1xyXG5cclxuXHRcdEVPUDoge1xyXG5cdFx0XHRsaXN0ZW46IGZ1bmN0aW9uICggY2IgKSB7ICRyb290U2NvcGUuJG9uKCAnRU9QJywgY2IgKTsgfSxcclxuXHRcdFx0ZW1pdDogZnVuY3Rpb24gKCkgeyAkcm9vdFNjb3BlLiRicm9hZGNhc3QoICdFT1AnICk7IH1cclxuXHRcdH0sXHJcblxyXG5cdH07XHJcblxyXG5cdHJldHVybiBFVlQ7XHJcblxyXG59IF07XHJcbiIsImFuZ3VsYXIubW9kdWxlKCAnYXBwJywgW10gKVxyXG5cclxuLmNvbnN0YW50KCAnVE1EQl9BUEknLCB7XHJcblx0a2V5OiAnMzc0YzAzNDJhNjQwNmRmZTBhZWIzZGUyZWEwNDJjNTknLFxyXG5cdHVybDogJ2h0dHA6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy8nXHJcbn0gKVxyXG5cclxuLmNvbnRyb2xsZXIoICdtYWluQ3RybCcsIHJlcXVpcmUoICcuL21haW4uY3RybC5qcycgKSApXHJcbi5kaXJlY3RpdmUoICdtb3ZpZUl0ZW0nLCByZXF1aXJlKCAnLi9tdkl0ZW0uZGlyLmpzJyApIClcclxuLmZhY3RvcnkoICdUTURiJywgcmVxdWlyZSggJy4vVE1EYi5mYWMuanMnICkgKVxyXG4uZmFjdG9yeSggJ0VWVCcsIHJlcXVpcmUoICcuL2V2ZW50cy5mYWMuanMnICkgKVxyXG47XHJcblxyXG4vLyB3ZWJnbFxyXG5yZXF1aXJlKCAnLi9pbmRleEdMLmpzJyApO1xyXG4iLCIvLyAndXNlIHN0cmljdCc7XHJcblxyXG52YXIgQ0FOVkFTLCBTVEFUUztcbnZhciBTQ0VORSwgQ0FNRVJBLCBDQU1FUkFfQ1RSTCwgUkVOREVSRVI7XG52YXIgV0lEVEggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbnZhciBIRUlHSFQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG52YXIgUElYRUxfUkFUSU8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xudmFyIFNDUkVFTl9SQVRJTyA9IFdJRFRIIC8gSEVJR0hUO1xudmFyIE1PVVNFX1ggPSBXSURUSCAqIDAuNTtcbnZhciBNT1VTRV9ZID0gSEVJR0hUICogMC41O1xudmFyIFdIRUVMX0RZID0gMDtcblxuLy8gLS0tLSBTZXR0aW5nc1xudmFyIFNDRU5FX1NFVFRJTkdTID0ge1xuXHRiZ0NvbG9yOiAyMzY4NTU3LFxuXHRlbmFibGVHcmlkSGVscGVyOiB0cnVlLFxuXHRlbmFibGVBeGlzSGVscGVyOiB0cnVlXG59O1xuXG4vLyAtLS0tIFNjZW5lXG5DQU5WQVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2NhbnZhcy1jb250YWluZXInICk7XG5TQ0VORSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4vLyAtLS0tIENhbWVyYVxuQ0FNRVJBID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKCA2MCwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDEwLCAxMDAwMDAgKTtcclxuLy8gLS0tLSBDYW1lcmEgb3JiaXQgY29udHJvbHNcbi8vIENBTUVSQV9DVFJMID0gbmV3IFRIUkVFLk9yYml0Q29udHJvbHMoIENBTUVSQSwgQ0FOVkFTICk7XG4vLyBDQU1FUkFfQ1RSTC5vYmplY3QucG9zaXRpb24ueiA9IDYwMDtcbi8vIENBTUVSQV9DVFJMLnVwZGF0ZSgpO1xuLy8gZ2xvYmFsLmNhbSA9IENBTUVSQV9DVFJMO1xuZ2xvYmFsLmNhbSA9IENBTUVSQTtcbi8vIC0tLS0gUmVuZGVyZXJcblJFTkRFUkVSID0gbmV3IFRIUkVFLkNTUzNEUmVuZGVyZXIoKTtcclxuUkVOREVSRVIuc2V0U2l6ZSggV0lEVEgsIEhFSUdIVCApO1xyXG5DQU5WQVMuYXBwZW5kQ2hpbGQoIFJFTkRFUkVSLmRvbUVsZW1lbnQgKTtcbi8vIC0tLS0gU3RhdHNcblNUQVRTID0gbmV3IFN0YXRzKCk7XG5DQU5WQVMuYXBwZW5kQ2hpbGQoIFNUQVRTLmRvbUVsZW1lbnQgKTtcblxuZnVuY3Rpb24gbWFpbigpIHtcblxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoKSB7XG5cblx0Ly8gdmFyIGR4ID0gLSAoICggTU9VU0VfWCAvIFdJRFRIICkgLSAwLjUgKTtcblx0Ly8gaWYgKCBNYXRoLmFicyggZHggKSA+IDAuNCApIHtcblx0Ly8gXHRDQU1FUkEucm90YXRlWSggZHggKiAwLjAxICk7XG5cdC8vIH1cblxuXHQvL1xuXHQvLyB2YXIgZHkgPSAtICggKCBNT1VTRV9ZIC8gSEVJR0hUICkgLSAwLjUgKTtcblx0Ly8gaWYgKCBNYXRoLmFicyggZHkgKSA+IDAuMiApIHtcblx0Ly8gXHRDQU1FUkEucG9zaXRpb24ueSArPSBkeSAqIDEwLjA7XG5cdC8vIH1cblxuXHRDQU1FUkEucG9zaXRpb24ueSArPSBXSEVFTF9EWSAqIDEuMDtcblx0Q0FNRVJBLnJvdGF0ZVkoIFdIRUVMX0RZICogMC4wMjUgKTtcblx0V0hFRUxfRFkgKj0gMC45NTtcblxufVxuXG4vLyAtLS0tICBkcmF3IGxvb3BcbmZ1bmN0aW9uIHJ1bigpIHtcblxuXHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHJ1biApO1xuXHQvLyBSRU5ERVJFUi5jbGVhcigpO1xyXG5cdHVwZGF0ZSgpO1xuXHRSRU5ERVJFUi5yZW5kZXIoIFNDRU5FLCBDQU1FUkEgKTtcclxuXHRTVEFUUy51cGRhdGUoKTtcclxuXHJcbn1cblxuQ0FOVkFTLmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoIGV2ZW50ICkge1xuXG5cdE1PVVNFX1ggPSBldmVudC5jbGllbnRYO1xuXHRNT1VTRV9ZID0gZXZlbnQuY2xpZW50WTtcblxufSApO1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3doZWVsJywgZnVuY3Rpb24gKCBldmVudCApIHtcblxuXHRXSEVFTF9EWSA9IE1hdGguc2lnbiggZXZlbnQuZGVsdGFZICk7XG5cbn0gKTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlwcmVzcycsIGZ1bmN0aW9uICggZXZlbnQgKSB7XHJcblx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdGNhc2UgMTE5Oi8qdyovXG5cdFx0XHRXSEVFTF9EWSA9IDEuMDtcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAxMTU6LypzKi9cclxuXHRcdFx0V0hFRUxfRFkgPSAtMS4wO1xyXG5cdFx0XHRicmVhaztcclxuXHR9XG59ICk7XG5cbnZhciB1dGlsID0gcmVxdWlyZSggJy4vdXRpbC5qcycgKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAncmVzaXplJywgdXRpbC5kZWJvdW5jZSggb25XaW5kb3dSZXNpemUsIDUwICkgKTtcblxuZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoKSB7XG5cdFdJRFRIID0gd2luZG93LmlubmVyV2lkdGg7XG5cdEhFSUdIVCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblx0UElYRUxfUkFUSU8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuXHRTQ1JFRU5fUkFUSU8gPSBXSURUSCAvIEhFSUdIVDtcblx0Q0FNRVJBLmFzcGVjdCA9IFNDUkVFTl9SQVRJTztcblx0Q0FNRVJBLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcblx0UkVOREVSRVIuc2V0U2l6ZSggV0lEVEgsIEhFSUdIVCApO1xufVxuXG5cblxyXG5tYWluKCk7XHJcbnJ1bigpO1xyXG5cclxuZ2xvYmFsLm1ha2VIZWxpeFBvc3RlcnMgPSBmdW5jdGlvbiggcG9zdGVyT2JqZWN0TXVsdGkgKSB7XHJcblx0dmFyIHZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblx0dmFyIGFsbFBvc3RlcnMgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuXHRmb3IgKCB2YXIgaSA9IDAgOyBpIDwgcG9zdGVyT2JqZWN0TXVsdGkubGVuZ3RoOyBpICsrICkge1xyXG5cdFx0dmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xyXG5cdFx0ZWxlbS5jbGFzc05hbWUgPSAncG9zdGVyRWxlbSc7XHJcblx0XHRlbGVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdodHRwOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3cxNTQvXCIgKyBwb3N0ZXJPYmplY3RNdWx0aVtpXS5wb3N0ZXJfcGF0aCArIFwiJylcIjtcclxuXHRcdGVsZW0uc3R5bGUud2lkdGggPSAnMTUwcHgnO1xyXG5cdFx0ZWxlbS5zdHlsZS5oZWlnaHQgPSAnMjMwcHgnO1xyXG5cdFx0Ly8gZWxlbS50ZXh0Q29udGVudCA9ICdURVNUIFRFWFQnO1xyXG5cdFx0dmFyIGNzczNkT2JqID0gbmV3IFRIUkVFLkNTUzNET2JqZWN0KCBlbGVtICk7XHJcblxyXG5cdFx0dmFyIHBoaSA9IGkgKiAwLjE3NSArIE1hdGguUEk7XHJcblx0XHR2YXIgcnIgPSA5MDA7XHJcblx0XHRjc3MzZE9iai5wb3NpdGlvbi54ID0gLXJyICogTWF0aC5zaW4oIHBoaSApO1xyXG5cdFx0Y3NzM2RPYmoucG9zaXRpb24ueSA9IC0oIGkgKiA4ICkgKyAyMDA7XHJcblx0XHRjc3MzZE9iai5wb3NpdGlvbi56ID0gcnIgKiBNYXRoLmNvcyggcGhpICk7XHJcblxyXG5cdFx0dmVjdG9yLnggPSAtY3NzM2RPYmoucG9zaXRpb24ueCAqIDI7XHJcblx0XHR2ZWN0b3IueSA9IGNzczNkT2JqLnBvc2l0aW9uLnk7XHJcblx0XHR2ZWN0b3IueiA9IC1jc3MzZE9iai5wb3NpdGlvbi56ICogMjtcclxuXHRcdC8vIHZlY3Rvci5tdWx0aXBseVNjYWxhciggLTEgKTtcclxuXHJcblx0XHRjc3MzZE9iai5sb29rQXQoIHZlY3RvciApO1xyXG5cclxuXHRcdGFsbFBvc3RlcnMuYWRkKCBjc3MzZE9iaiApO1xyXG5cdH1cclxuXHRTQ0VORS5hZGQoIGFsbFBvc3RlcnMgKTtcclxufTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSBbICckc2NvcGUnLCAnVE1EYicsICdFVlQnLFxyXG5mdW5jdGlvbiAoICRzY29wZSwgVE1EYiwgRVZUICkgIHtcclxuXHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2bS5zZWFyY2ggPSB7XHJcblx0XHRxdWVyeTogJycsXHJcblx0fTtcclxuXHR2bS5tb3ZpZUl0ZW1zID0gbnVsbDtcclxuXHJcblx0JHNjb3BlLiR3YXRjaCggVE1EYi5nZXRSZXMsIGZ1bmN0aW9uICggcmVzICkge1xyXG5cdFx0dm0ubW92aWVJdGVtcyA9IHJlcztcclxuXHR9LCB0cnVlICk7XHJcblxyXG5cdHZhciBwcmV2UXVlcnkgPSAnJztcclxuXHR2bS5zZWFyY2ggPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoIHZtLnNlYXJjaC5xdWVyeSA9PT0gJycgKSByZXR1cm47XHJcblx0XHRpZiAoIHByZXZRdWVyeSAhPT0gdm0uc2VhcmNoLnF1ZXJ5ICkge1xyXG5cdFx0XHRUTURiLmNsZWFyU2VhcmNoKCk7XHJcblx0XHRcdHByZXZRdWVyeSA9IHZtLnNlYXJjaC5xdWVyeTtcclxuXHRcdH1cclxuXHRcdFRNRGIucmVxKCB2bS5zZWFyY2ggKTtcclxuXHR9O1xyXG5cclxuXHQvLyBERUJVR1xyXG5cdHdpbmRvdy5TQ09QRSA9ICRzY29wZTtcclxuXHR2bS5UTURiID0gVE1EYjtcclxuXHJcblx0RVZULkVPUC5saXN0ZW4oIGZ1bmN0aW9uICgpIHtcclxuXHRcdGNvbnNvbGUubG9nKCAncmVjaWV2ZWQgRU9QIGV2ZW50IScgKTtcclxuXHR9ICk7XHJcblxyXG59IF07XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gWyAnVE1EYicsIGZ1bmN0aW9uICggVE1EYiApIHtcclxuXHJcblx0ZnVuY3Rpb24gY3RybCggJHNjb3BlLCAkZWxlbWVudCApIHtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0cmVwbGFjZTogdHJ1ZSxcclxuXHRcdHNjb3BlOiB7XHJcblx0XHRcdG1vdmllSXRlbTogJz0nXHJcblx0XHR9LFxyXG5cdFx0Y29udHJvbGxlcjogY3RybCxcclxuXHRcdGNvbnRyb2xsZXJBczogJ212SXRlbScsXHJcblx0XHR0ZW1wbGF0ZVVybDogJ3NyYy9tdkl0ZW0uaHRtbCdcclxuXHR9O1xyXG5cclxufSBdO1xyXG4iLCJmdW5jdGlvbiBkZWJvdW5jZSggZnVuYywgd2FpdCwgaW1tZWRpYXRlICkge1xyXG5cdHZhciBfdGhpcyA9IHRoaXMsXHJcblx0XHRfYXJndW1lbnRzID0gYXJndW1lbnRzO1xyXG5cclxuXHR2YXIgdGltZW91dDtcclxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciBjb250ZXh0ID0gX3RoaXMsXHJcblx0XHRcdGFyZ3MgPSBfYXJndW1lbnRzO1xyXG5cdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XHJcblxyXG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0aWYgKCAhaW1tZWRpYXRlICkgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG5cdFx0fTtcclxuXHRcdHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xyXG5cdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XHJcblx0XHR0aW1lb3V0ID0gc2V0VGltZW91dCggbGF0ZXIsIHdhaXQgKTtcclxuXHRcdGlmICggY2FsbE5vdyApIGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcclxuXHR9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHRkZWJvdW5jZVxyXG59O1xyXG4iXX0=
